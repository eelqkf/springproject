<html xmlns:th="http: //www.thymeleaf.org">

<head>
	<!-- Required meta tags -->
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<!-- Bootstrap CSS -->
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
		integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
	<link href="/static/starter-template.css" th:href="@{/starter-template.css}" rel="stylesheet">
	<title>상품추가</title>
	<script src="https://code.jquery.com/jquery-3.5.1.min.js"
		integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
</head>

<body>
	<nav class="navbar navbar-expand-md navbar-dark bg-dark fixed-top">
		<a class="navbar-brand">관리자모드</a>
		<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarsExampleDefault"
			aria-controls="navbarsExampleDefault" aria-expanded="false" aria-label="Toggle navigation">
			<span class="navbar-toggler-icon"></span>
		</button>
		<div class="collapse navbar-collapse" id="navbarsExampleDefault">
			<ul class="navbar-nav mr-auto">
				<li class="nav-item active">
					<a class="nav-link" th:href="@{/list}">상품관리 <span class="sr-only"></span></a>
				</li>
			</ul>
		</div>

	</nav>
	<form  th:action="@{/insert}" method="post" enctype="multipart/form-data">
		<div class="form-group row mb-4">
		<label class="col-form-label text-md-right col-12 col-md-3 col-lg-3">카테고리</label>
		<div class="col-sm-12 col-md-7">
			<select class="form-control selectric" id="ca_id" name="ca_id">
				<option>--</option>
				<option th:each="category : ${category}" th:value="${category.ca_id}" th:text="${category.ca_name}">
				</option>
			</select>
		</div>
	</div>
	<div class="form-group row mb-4">
		<label class="col-form-label text-md-right col-12 col-md-3 col-lg-3">상품명</label>
		<div class="col-sm-12 col-md-7">
			<input type="text" class="form-control" name="p_name" id="p_name">
		</div>
	</div>
	<div class="form-group row mb-4">
		<label class="col-form-label text-md-right col-12 col-md-3 col-lg-3">가격</label>
		<div class="col-sm-12 col-md-7">
			<input class="form-control" type="number" id="price" name="price" placeholder="숫자만 입력해주세요">
		</div>
	</div>
	<div class="form-group row mb-4">
		<label class="col-form-label text-md-right col-12 col-md-3 col-lg-3">재고량</label>
		<div class="col-sm-12 col-md-7">
			<input class="form-control" type="number" id="stock" name="stock" placeholder="숫자만 입력해주세요">
		</div>
	</div>
	<div class="form-group row mb-4">
		<label class="col-form-label text-md-right col-12 col-md-3 col-lg-3">사진 업로드</label>
		<div class="col-sm-12 col-md-7">
			<input type="file" name="file" id="file">
		</div>
	</div>
	<div class="form-group row mb-4">
		<label class="col-form-label text-md-right col-12 col-md-3 col-lg-3"></label>
		<div class="col-sm-12 col-md-7">
			<input class="btn btn-primary" value="등록" type="submit" id="submit">
			<a th:href="@{/list}" ><input class="btn btn-primary" value="돌아가기" type="button"  ></a >
		</div>
	</div>
	</form>
</body>
<!--<script th:inline="javascript">
	$(() => {
		$('#submit').on('click', () => {
			const p_name = $('#p_name').val();
			const price = $('#price').val();
			const stock = $('#stock').val();
			const ca_id = $('#category option:selected').val();
			const path = '/api/insert';

			const json = JSON.stringify({
				'p_name': p_name,
				'price': price,
				'stock': stock,
				'ca_id': ca_id,
			});
			console.log(json);
			const csrfToken =/*[[${_csrf.token}]]*/ null;
			const csrfHeader =/*[[${_csrf.headerName}]]*/ null;
			$.ajax({
				url: path,
				type: 'POST',
				contentType: 'application/json',
				data: json,
				beforeSend: function (xhr) {
					xhr.setRequestHeader(csrfHeader, csrfToken);
				}

			}).done((result) => {
				location.replace("/list");
			}).fail((error) => {
				alert("중복된 상품명 입니다");
			})

		})
	})
</script>-->

</html>